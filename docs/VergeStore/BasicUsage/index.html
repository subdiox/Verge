<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus v2.0.0-alpha.58">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-163893115-1","auto"),ga("set","anonymizeIp",!0),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script><title data-react-helmet="true">Basic Usage | Verge - Flux for SwiftUI</title><meta data-react-helmet="true" property="og:image" content="https://vergegroup.github.io/Verge/img/ogimage2.png"><meta data-react-helmet="true" property="twitter:image" content="https://vergegroup.github.io/Verge/img/ogimage2.png"><meta data-react-helmet="true" name="twitter:image:alt" content="Image for Verge - Flux for SwiftUI"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="Basic Usage | Verge - Flux for SwiftUI"><meta data-react-helmet="true" name="description" content="This section shows you how we start to use Verge."><meta data-react-helmet="true" property="og:description" content="This section shows you how we start to use Verge."><meta data-react-helmet="true" property="og:url" content="https://vergegroup.github.io/Verge/docs/VergeStore/BasicUsage"><link data-react-helmet="true" rel="shortcut icon" href="/Verge/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://vergegroup.github.io/Verge/docs/VergeStore/BasicUsage"><link rel="stylesheet" href="/Verge/styles.d61bc26a.css">
<link rel="preload" href="/Verge/styles.d39c2516.js" as="script">
<link rel="preload" href="/Verge/runtime~main.9f856ea2.js" as="script">
<link rel="preload" href="/Verge/main.ed98f32f.js" as="script">
<link rel="preload" href="/Verge/1.28140ff6.js" as="script">
<link rel="preload" href="/Verge/2.a89d632e.js" as="script">
<link rel="preload" href="/Verge/33.241e40f0.js" as="script">
<link rel="preload" href="/Verge/34.634df47c.js" as="script">
<link rel="preload" href="/Verge/4ed10787.7db3a3b3.js" as="script">
<link rel="preload" href="/Verge/17896441.522c7c0e.js" as="script">
<link rel="preload" href="/Verge/b2331c53.6848e03f.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=window.matchMedia("(prefers-color-scheme: dark)"),n=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();null!==n?t(n):(e.matches,t("dark"))}()</script><div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/Verge/"><img class="navbar__logo" src="/Verge/img/sidebar-logo@2x.png" alt="Verge Logo"><strong class="navbar__title">Verge</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/Verge/docs/">Docs</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/Verge/docs/VergeStore/BasicUsage">Basic usage</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/VergeGroup/Verge" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_1gtM"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_keGJ moon_1gwN"></span></div><div class="react-toggle-track-x"><span class="toggle_keGJ sun_3CPA"></span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/Verge/"><img class="navbar__logo" src="/Verge/img/sidebar-logo@2x.png" alt="Verge Logo"><strong class="navbar__title">Verge</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/Verge/docs/">Docs</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/Verge/docs/VergeStore/BasicUsage">Basic usage</a></li><li class="menu__list-item"><a href="https://github.com/VergeGroup/Verge" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_1kjD"><div class="docSidebarContainer_1cYp" role="complementary"><div class="sidebar_1kLs"><div class="menu menu--responsive menu_w2sC"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_2vk4" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#!">Verge</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Verge/docs/installation">Installation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Verge/docs/motivation">Motivation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Verge/docs/">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Verge/docs/demo">Demo</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">VergeStore</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/Verge/docs/VergeStore/BasicUsage">Basic Usage</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Verge/docs/VergeStore/advanced-usage">Advanced usage</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Docs</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Verge/docs/VergeStore/store">Store</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Verge/docs/VergeStore/mutation">Mutation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Verge/docs/VergeStore/state">State</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Verge/docs/VergeStore/changes">Changes object</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Verge/docs/VergeStore/extended-computed-property">Extended Computed property</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Verge/docs/VergeStore/derived">Derived / BindingDerived</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Verge/docs/VergeStore/dispatcher">Dispatcher</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Verge/docs/VergeStore/logging">Logging</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Verge/docs/VergeStore/utilities">Utilities</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Verge/docs/VergeStore/optimization-tips">Optimization Tips</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Use-cases</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Verge/docs/VergeStore/use-cases/using-with-collection-view">With Collection View in UIKit</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Verge/docs/VergeStore/migrate-from-classic">Migrate from VergeClassic</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#!">VergeORM</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Verge/docs/VergeORM/Overview">Overview</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Docs</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Verge/docs/VergeORM/index-table">Index</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Verge/docs/VergeORM/middleware">Middleware</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Verge/docs/VergeORM/making-derived">Making a Derived for the entity</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Verge/docs/VergeORM/tips">Tips</a></li></ul></li></ul></li></ul></div></div></div><main class="docMainContainer_FFX1"><div class="container padding-vert--lg docItemWrapper_1cc7"><div class="row"><div class="col docItemCol_2GOA"><div class="docItemContainer_2cwg"><article><header><h1 class="docTitle_1vWb">Basic Usage</h1></header><div class="markdown"><p>This section shows you how we start to use Verge.<br>
It&#x27;s very basic usage. You need to read Advanced Usage section if you&#x27;re considering to use in production.</p><p>To understand smoothly about Verge, we need to figure the following domains out.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="domains"></a>Domains<a aria-hidden="true" tabindex="-1" class="hash-link" href="#domains" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="store"></a>Store<a aria-hidden="true" tabindex="-1" class="hash-link" href="#store" title="Direct link to heading">#</a></h3><ul><li>A storage object to manage a state and emit activities by the action.</li><li>Store can dispatch actions to itself.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="state"></a>State<a aria-hidden="true" tabindex="-1" class="hash-link" href="#state" title="Direct link to heading">#</a></h3><ul><li>A type of state-tree that describes the data our feature needs.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="activity"></a>Activity<a aria-hidden="true" tabindex="-1" class="hash-link" href="#activity" title="Direct link to heading">#</a></h3><ul><li>A type that describes an activity that happens during performs the action.</li><li>This instance won&#x27;t be stored in anywhere. It would help us to perform something by event-driven.</li><li>Consider to use this depends on that if can be represented as a state.</li><li>For example, to present alert or notifcitaions by the action.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="action"></a>Action<a aria-hidden="true" tabindex="-1" class="hash-link" href="#action" title="Direct link to heading">#</a></h3><ul><li>Action runs any operations (sync / async) and commits any mutations to the state of the store.</li><li>Action is described by Swift&#x27;s method in Store or Dispatcher.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="dispatcher-optional"></a>Dispatcher (Optional)<a aria-hidden="true" tabindex="-1" class="hash-link" href="#dispatcher-optional" title="Direct link to heading">#</a></h3><ul><li>A type to dispatch an action to specific store.</li><li>For a large application, to separate the logics each domain.</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="setup-a-store"></a>Setup a Store<a aria-hidden="true" tabindex="-1" class="hash-link" href="#setup-a-store" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="define-a-state"></a>Define a state<a aria-hidden="true" tabindex="-1" class="hash-link" href="#define-a-state" title="Direct link to heading">#</a></h3><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-swift codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">struct MyState {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  var count = 0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="define-an-activity"></a>Define an activity<a aria-hidden="true" tabindex="-1" class="hash-link" href="#define-an-activity" title="Direct link to heading">#</a></h3><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-swift codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">enum MyActivity {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  case countWasIncremented</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div></div></div><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p><code>Activity</code> is not required type.<br>
If you don&#x27;t need to use <code>Activity</code>, you can set<code>Never</code> in Store&#x27;s type parameter.</p></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="define-a-store"></a>Define a store<a aria-hidden="true" tabindex="-1" class="hash-link" href="#define-a-store" title="Direct link to heading">#</a></h3><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-swift codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">class MyStore: Store&lt;MyState, MyActivity&gt; {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  init(dependency: Dependency) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    super.init(initialState: .init(), logger: nil)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div></div></div><p>In example, it created a subclass of <code>Store</code>. Of course, we can also create an instance from <code>Store</code> without subclassing.<br>
But we can put some dependencies (e.g. API client) with creating a sub-class of <code>Store</code>.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>When don&#x27;t use Activity</h5></div><div class="admonition-content"><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-swift codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">class MyStore: Store&lt;MyState, Never&gt; {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="add-an-action"></a>Add an action<a aria-hidden="true" tabindex="-1" class="hash-link" href="#add-an-action" title="Direct link to heading">#</a></h2><p>Next, add an action to mutate the state.
Essentially, Verge uses Swift&#x27;s method to describe an action against enum or struct based action descriptor other Flux library has.
This approach has advantages that adding an action faster and call it naturally and dispatches with a faster way by Swift&#x27;s native method dispatching system.</p><ul><li><strong>Better Performance</strong><ul><li>Swift can perform this action with Swift&#x27;s method dispatching instead switch-case computing.</li></ul></li><li><strong>Returns anything we need</strong><ul><li>the action can return anything from that action (e.g. state or result)</li><li>If that action dispatch async operation, it can return <code>Future</code> object. (such as Vuex action)</li></ul></li></ul><p>As a future direction, Verge might get a dispatching action system with describing with enum or struct based to run action.<br>
However, the current approach would be the base system for it.</p><p>We&#x27;re currently researching that needs.</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-swift codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">class MyStore: Store&lt;MyState, MyActivity&gt; {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">  func incrementCount() {</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">    commit {</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">      $0.count += 1</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">  }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div></div></div><p>Yes, this point is most different with Redux. we could say it close to Vuex.<br>
Store knows what the application&#x27;s needs.</p><p>To mutate the state, we use <code>commit</code> method.<br>
the argument inside commit&#x27;s closure is <code>inout State</code>, you can modify it anything but you can&#x27;t put the asynchronous operations.<br>
If you need to do this, call <code>commit</code> from the asynchronous operation. like this:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-swift codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">func incrementCount() {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  DispatchQueue.main.async {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    commit {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      $0.count += 1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div></div></div><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>You can define actions aware from the Store</h5></div><div class="admonition-content"><p>Using <code>Dispatcher</code>, you can manage the set of actions aware from the store.</p></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="run-the-action"></a>Run the action<a aria-hidden="true" tabindex="-1" class="hash-link" href="#run-the-action" title="Direct link to heading">#</a></h3><p>For example, call that action.</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-swift codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">let store = MyStore(...)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">store.incrementCount()</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="send-an-activity-from-the-action"></a>Send an activity from the action<a aria-hidden="true" tabindex="-1" class="hash-link" href="#send-an-activity-from-the-action" title="Direct link to heading">#</a></h2><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-swift codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">func incrementCount() {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  send(.countWasIncremented)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="binding-the-state-with-ui"></a>Binding the state with UI<a aria-hidden="true" tabindex="-1" class="hash-link" href="#binding-the-state-with-ui" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="use-the-store-in-swiftui"></a>Use the store in SwiftUI<a aria-hidden="true" tabindex="-1" class="hash-link" href="#use-the-store-in-swiftui" title="Direct link to heading">#</a></h3><p>To bind the state with <code>View</code>, it uses <code>UseState</code>.<br>
Since <code>Store</code> is also compatible with <code>ObservableObject</code>, we can declare <code>@ObservedObject</code> or <code>@EnviromentObject</code>.</p><p><code>UseState</code> provides several options to reduce no changes updates.<br>
Please check it out from Xcode.</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-swift codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">struct MyView: View {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  let store: MyStore</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  var body: some View {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    UseState { state in</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      Text(state.name)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    .onReceive(session.store.activityPublisher) { (activity) in</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      ...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="use-the-store-in-uikit"></a>Use the store in UIKit<a aria-hidden="true" tabindex="-1" class="hash-link" href="#use-the-store-in-uikit" title="Direct link to heading">#</a></h3><p>In UIKit, UIKit doesn&#x27;t work with differentiating.<br>
To keep better performance, we need to set a value if it&#x27;s changed.</p><p>Verge publishes an object that contains previous state and latest state, <code>Changes</code> object would be so helpful to check if a value changed.</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-swift codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">class ViewController: UIViewController {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  let store: MyStore</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  var cancellable: VergeAnyCancellable?</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  init(store: MyStore) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    self.cancellable = store.sinkChanges { [weak self] changes in</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      self?.update(changes: changes)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  private func update(changes: Changes&lt;MyStore.State&gt;) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    changes.ifChanged(\.name) { (name) in</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      nameLabel.text = name</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    changes.ifChanged(\.age) { (age) in</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      ageLabel.text = age.description</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div></div></div></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/VergeGroup/Verge/docs/docs/VergeStore/BasicUsage.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/Verge/docs/demo"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Demo</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/Verge/docs/VergeStore/advanced-usage"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Advanced usage »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_TbNY"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#domains" class="table-of-contents__link">Domains</a><ul><li><a href="#store" class="table-of-contents__link">Store</a></li><li><a href="#state" class="table-of-contents__link">State</a></li><li><a href="#activity" class="table-of-contents__link">Activity</a></li><li><a href="#action" class="table-of-contents__link">Action</a></li><li><a href="#dispatcher-optional" class="table-of-contents__link">Dispatcher (Optional)</a></li></ul></li><li><a href="#setup-a-store" class="table-of-contents__link">Setup a Store</a><ul><li><a href="#define-a-state" class="table-of-contents__link">Define a state</a></li><li><a href="#define-an-activity" class="table-of-contents__link">Define an activity</a></li><li><a href="#define-a-store" class="table-of-contents__link">Define a store</a></li></ul></li><li><a href="#add-an-action" class="table-of-contents__link">Add an action</a><ul><li><a href="#run-the-action" class="table-of-contents__link">Run the action</a></li></ul></li><li><a href="#send-an-activity-from-the-action" class="table-of-contents__link">Send an activity from the action</a></li><li><a href="#binding-the-state-with-ui" class="table-of-contents__link">Binding the state with UI</a><ul><li><a href="#use-the-store-in-swiftui" class="table-of-contents__link">Use the store in SwiftUI</a></li><li><a href="#use-the-store-in-uikit" class="table-of-contents__link">Use the store in UIKit</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a href="https://github.com/VergeGroup/Verge" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="text--center"><div>Copyright © 2020 VergeGroup. Built with Docusaurus.</div></div></div></footer></div>
<script src="/Verge/styles.d39c2516.js"></script>
<script src="/Verge/runtime~main.9f856ea2.js"></script>
<script src="/Verge/main.ed98f32f.js"></script>
<script src="/Verge/1.28140ff6.js"></script>
<script src="/Verge/2.a89d632e.js"></script>
<script src="/Verge/33.241e40f0.js"></script>
<script src="/Verge/34.634df47c.js"></script>
<script src="/Verge/4ed10787.7db3a3b3.js"></script>
<script src="/Verge/17896441.522c7c0e.js"></script>
<script src="/Verge/b2331c53.6848e03f.js"></script>
</body>
</html>