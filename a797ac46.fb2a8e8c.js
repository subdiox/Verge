(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{159:function(e,t,a){"use strict";a.r(t),a.d(t,"frontMatter",(function(){return o})),a.d(t,"metadata",(function(){return i})),a.d(t,"rightToc",(function(){return s})),a.d(t,"default",(function(){return l}));var n=a(2),r=a(9),c=(a(0),a(170)),o={id:"advanced-usage",title:"Advanced usage",sidebar_label:"Advanced usage"},i={id:"VergeStore/advanced-usage",isDocsHomePage:!1,title:"Advanced usage",description:"To keep performance and scalability",source:"@site/docs/VergeStore/advanced-usage.md",permalink:"/Verge/docs/VergeStore/advanced-usage",editUrl:"https://github.com/VergeGroup/Verge/docs/docs/VergeStore/advanced-usage.md",sidebar_label:"Advanced usage",sidebar:"docs",previous:{title:"Basic Usage",permalink:"/Verge/docs/VergeStore/BasicUsage"},next:{title:"Store - a storage of the state",permalink:"/Verge/docs/VergeStore/store"}},s=[{value:"To keep performance and scalability",id:"to-keep-performance-and-scalability",children:[]},{value:"Adding a cachable computed property in a State",id:"adding-a-cachable-computed-property-in-a-state",children:[]},{value:"Making a slice of the state (Selector)",id:"making-a-slice-of-the-state-selector",children:[]},{value:"Creating a Dispatcher",id:"creating-a-dispatcher",children:[]}],p={rightToc:s};function l(e){var t=e.components,a=Object(r.a)(e,["components"]);return Object(c.b)("wrapper",Object(n.a)({},p,a,{components:t,mdxType:"MDXLayout"}),Object(c.b)("h2",{id:"to-keep-performance-and-scalability"},"To keep performance and scalability"),Object(c.b)("h2",{id:"adding-a-cachable-computed-property-in-a-state"},"Adding a cachable computed property in a State"),Object(c.b)("p",null,"We can add a computed property in a state to get a derived value with stored property,",Object(c.b)("br",{parentName:"p"}),"\n","and that computed property works fine as well other stored property."),Object(c.b)("pre",null,Object(c.b)("code",Object(n.a)({parentName:"pre"},{className:"language-swift"}),"struct MyState {\n  var items: [Item] = [] {\n\n  var itemsCount: Int {\n    items.count\n  }\n}\n")),Object(c.b)("p",null,"However, this patterns might cause an expensive cost of operation depends on how they computes.",Object(c.b)("br",{parentName:"p"}),"\n","To solve it, Verge arrows us to define the computed property with another approach."),Object(c.b)("pre",null,Object(c.b)("code",Object(n.a)({parentName:"pre"},{className:"language-swift"}),"struct MyState: ExtendedStateType {\n\n  var name: String = ...\n  var items: [Int] = []\n\n  struct Extended: ExtendedType {\n    let filteredArray = Field.Computed<[Int]> {\n      $0.items.filter { $0 > 300 }\n    }\n    .ifChanged(selector: \\.largeArray)\n  }\n}\n")),Object(c.b)("pre",null,Object(c.b)("code",Object(n.a)({parentName:"pre"},{className:"language-swift"}),"let store: MyStore\n\nstore.changes.computed.filteredArray\n")),Object(c.b)("p",null,"This defined computed array calculates only if changed specified value.",Object(c.b)("br",{parentName:"p"}),"\n","That condition to re-calculate is defined with ",Object(c.b)("inlineCode",{parentName:"p"},".ifChanged")," method in the example code."),Object(c.b)("p",null,"And finally, it caches the result by first-time access and it returns cached value until if the source value changed."),Object(c.b)("h2",{id:"making-a-slice-of-the-state-selector"},"Making a slice of the state (Selector)"),Object(c.b)("p",null,"We can create a slice object that derives a data from the state."),Object(c.b)("pre",null,Object(c.b)("code",Object(n.a)({parentName:"pre"},{className:"language-swift"}),"let derived: Derived<Int> = store.derived(.map(\\.count))\n\n// take a value\nderived.value\n\n// subscribe a value changes\nderived.sinkChanges { (changes: Changes<Int>) in\n}\n")),Object(c.b)("h2",{id:"creating-a-dispatcher"},"Creating a Dispatcher"),Object(c.b)("p",null,"Store arrows us to define an action in itself, that might cause gain complexity in supporting a large application.",Object(c.b)("br",{parentName:"p"}),"\n","To solve this, Verge offers us to create an object that dispatches an action to the store.",Object(c.b)("br",{parentName:"p"}),"\n","We can separate the code of actions to keep maintainability.",Object(c.b)("br",{parentName:"p"}),"\n","that also help us to manage a different type of dependencies."),Object(c.b)("p",null,"For example, the case of those dependencies different between logged-in and logged-out."),Object(c.b)("pre",null,Object(c.b)("code",Object(n.a)({parentName:"pre"},{className:"language-swift"}),"class MyDispatcher: MyStore.Dispatcher {\n  func moreOperation() {\n    commit {\n      ...\n    }\n  }\n}\n")),Object(c.b)("pre",null,Object(c.b)("code",Object(n.a)({parentName:"pre"},{className:"language-swift"}),"let store: MyStore\nlet dispatcher = MyDispatcher(target: store)\n\ndispatcher.moreOperation()\n")))}l.isMDXComponent=!0},170:function(e,t,a){"use strict";a.d(t,"a",(function(){return d})),a.d(t,"b",(function(){return m}));var n=a(0),r=a.n(n);function c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){c(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},c=Object.keys(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var p=r.a.createContext({}),l=function(e){var t=r.a.useContext(p),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},d=function(e){var t=l(e.components);return r.a.createElement(p.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},b=r.a.forwardRef((function(e,t){var a=e.components,n=e.mdxType,c=e.originalType,o=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),d=l(a),b=n,m=d["".concat(o,".").concat(b)]||d[b]||u[b]||c;return a?r.a.createElement(m,i(i({ref:t},p),{},{components:a})):r.a.createElement(m,i({ref:t},p))}));function m(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var c=a.length,o=new Array(c);o[0]=b;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i.mdxType="string"==typeof e?e:n,o[1]=i;for(var p=2;p<c;p++)o[p]=a[p];return r.a.createElement.apply(null,o)}return r.a.createElement.apply(null,a)}b.displayName="MDXCreateElement"}}]);